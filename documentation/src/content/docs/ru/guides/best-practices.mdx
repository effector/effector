---
title: –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –≤ effector
description: –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç–µ —Å Effector, –≤–∫–ª—é—á–∞—è –æ–±—â–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã, —Ç–∏–ø–∏–∑–∞—Ü–∏—é, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –∏ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã
redirectFrom:
  - /ru/docs/conventions/naming
  - /ru/conventions/naming
---

import Tabs from "@components/Tabs/Tabs.astro";
import TabItem from "@components/Tabs/TabItem.astro";

# –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –≤ Effector (#best-practices)

–í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ —Å–æ–±—Ä–∞–Ω—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç–µ —Å Effector, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞ –æ–ø—ã—Ç–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ –∏ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤.

## –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –º–∞–ª–µ–Ω—å–∫–∏–µ —Å—Ç–æ—Ä—ã (#keep-stores-small)

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç Redux, –≤ Effector —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å —Å—Ç–æ—Ä—ã –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∞—Ç–æ–º–∞—Ä–Ω—ã–º–∏. –î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä–µ–º, –ø–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ –∏ –∫–∞–∫–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —ç—Ç–æ –¥–∞–µ—Ç.

–ë–æ–ª—å—à–∏–µ —Å—Ç–æ—Ä—ã —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –ø–æ–ª–µ–π —Å–æ–∑–¥–∞—é—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–±–ª–µ–º:

- –õ–∏—à–Ω–∏–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã: –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ª—é–±–æ–≥–æ –ø–æ–ª—è –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ –Ω–∞ —Å—Ç–æ—Ä
- –¢—è–∂–µ–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è: –ö–∞–∂–¥–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ–≥–æ –æ–±—ä–µ–∫—Ç–∞
- –õ–∏—à–Ω–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è: –µ—Å–ª–∏ –≤—ã –∏–º–µ–µ—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ —Å—Ç–æ—Ä—ã –∑–∞–≤–∏—Å—è—â–∏–µ –æ—Ç –±–æ–ª—å—à–æ–≥–æ —Å—Ç–æ—Ä–∞, —Ç–æ –æ–Ω–∏ –±—É–¥—É—Ç –ø–µ—Ä–µ–≤—ã—á–∏—Å–ª—è—Ç—å—Å—è

–ê—Ç–æ–º–∞—Ä–Ω—ã–µ —Å—Ç–æ—Ä—ã –ø–æ–∑–≤–æ–ª—è—é—Ç:

- –û–±–Ω–æ–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å
- –ü–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –Ω—É–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

```ts
// ‚ùå –ë–æ–ª—å—à–æ–π —Å—Ç–æ—Ä - –ª—é–±–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤—ã–∑—ã–≤–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ–≥–æ
const $bigStore = createStore({
  profile: { /* –º–Ω–æ–≥–æ –ø–æ–ª–µ–π */ },
  settings: { /* –º–Ω–æ–≥–æ –ø–æ–ª–µ–π */ },
  posts: [ /* –º–Ω–æ–≥–æ –ø–æ—Å—Ç–æ–≤ */ ]
})

// ‚úÖ –ê—Ç–æ–º–∞—Ä–Ω—ã–µ —Å—Ç–æ—Ä—ã - —Ç–æ—á–µ—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
const $userName = createStore('')
const $userEmail = createStore('')
const $posts = createStore<Post[]>([])
const $settings = createStore<Settings>({})

// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –Ω—É–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
const UserName = () => {
  const name = useUnit($userName) // –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∏–º–µ–Ω–∏
  return <h1>{name}</h1>
}
```

–ü—Ä–∞–≤–∏–ª–∞ –∞—Ç–æ–º–∞—Ä–Ω—ã—Ö —Å—Ç–æ—Ä–æ–≤:

- –û–¥–∏–Ω —Å—Ç–æ—Ä = –æ–¥–Ω–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
- –°—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ–¥–µ–ª–∏–º—ã–º
- –°—Ç–æ—Ä—ã –º–æ–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω—è—Ç—å —á–µ—Ä–µ–∑ combine
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–æ—Ä–∞ –Ω–µ –¥–æ–ª–∂–Ω–æ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –¥–∞–Ω–Ω—ã–µ

## Immer –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ (#immer)

–ï—Å–ª–∏ –≤–∞—à —Å—Ç–æ—Ä —Å–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–µ–±–µ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, —Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å–µ–º–∏ –ª—é–±–∏–º—ã–π [Immer](https://github.com/immerjs/immer) –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

```ts
import { createStore } from "effector";
import { produce } from "immer";

const $users = createStore<User[]>([]);

$users.on(userUpdated, (users, updatedUser) =>
  produce(users, (draft) => {
    const user = draft.find((u) => u.id === updatedUser.id);
    if (user) {
      user.profile.settings.theme = updatedUser.profile.settings.theme;
    }
  }),
);
```

## –Ø–≤–Ω—ã–π —Å—Ç–∞—Ä—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (#explicit-app-start)

–ú—ã —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —è–≤–Ω—ã–π —Å—Ç–∞—Ä—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è, —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é.

–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:

1. –ö–æ–Ω—Ç—Ä–æ–ª—å –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
3. –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
4. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —è–≤–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

```ts
export const appStarted = createEvent();
```

–∞ —Ç–∞–∫–∂–µ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ:

<Tabs>
  <TabItem label="–ë–µ–∑ —Å–∫–æ—É–ø–æ–≤">

```ts
import { sample } from "effector";
import { scope } from "./app.js";

sample({
  clock: appStarted,
  target: initFx,
});

appStarted();
```

  </TabItem>
  <TabItem label="–°–æ —Å–∫–æ—É–ø–∞–º–∏">

```ts
import { sample, allSettled } from "effector";
import { scope } from "./app.js";

sample({
  clock: appStarted,
  target: initFx,
});

allSettled(appStarted, { scope });
```

  </TabItem>

</Tabs>

## –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `scope` (#use-scope)

–ö–æ–º–∞–Ω–¥–∞ effector —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Scope`, –¥–∞–∂–µ –µ—Å–ª–∏ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SSR.
–≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ, —á—Ç–æ–±—ã –≤ –±—É–¥—É—â–µ–º –≤—ã –º–æ–≥–ª–∏ —Å–ø–æ–∫–æ–π–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã —Å–æ `Scope`.

## –•—É–∫ `useUnit` (#use-unit)

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ö—É–∫–∞ `useUnit` —è–≤–ª—è–µ—Ç—Å—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–º —Å–ø–æ—Å–æ–±–æ–º –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —é–Ω–∏—Ç–∞–º–∏ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤ (üìòReact, üìóVue –∏ üìòSolid).
–ü–æ—á–µ–º—É –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `useUnit`:

- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å–æ —Å—Ç–æ—Ä–∞–º–∏
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è [—Ä–∞–±–æ—Ç–∞ —Å–æ `Scope`](/ru/advanced/work-with-scope) ‚Äì —é–Ω–∏—Ç—ã —Å–∞–º–∏ –∑–Ω–∞—é—Ç –≤ –∫–∞–∫–æ–º —Å–∫–æ—É–ø–µ –æ–Ω–∏ –±—ã–ª–∏ –≤—ã–∑–≤–∞–Ω—ã

## –ß–∏—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (#pure-functions)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —á–∏—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–µ–∑–¥–µ, –∫—Ä–æ–º–µ [—ç—Ñ—Ñ–µ–∫—Ç–æ–≤](/ru/api/effector/Effect), –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö, —ç—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–∞–π–¥-—ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- –ü—Ä–æ—â–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –õ–µ–≥—á–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å

:::tip{title="–≠—Ç–∞ —Ä–∞–±–æ—Ç–∞ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤"}
–ï—Å–ª–∏ –≤–∞—à –∫–æ–¥ –º–æ–∂–µ—Ç –≤—ã–±—Ä–æ—Å–∏—Ç—å –æ—à–∏–±–∫—É –∏–ª–∏ –º–æ–∂–µ—Ç –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è —É—Å–ø–µ—Ö–æ–º/–Ω–µ—É—Å–ø–µ—Ö–æ–º - —Ç–æ —ç—Ç–æ –æ—Ç–ª–∏—á–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤.
:::

## –û—Ç–ª–∞–¥–∫–∞ (#debug)

–ú—ã –Ω–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –≤–∞–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É [`patronum`](https://patronum.effector.dev/operators/) –∏ –º–µ—Ç–æ–¥ [`debug`](https://patronum.effector.dev/operators/debug/).

```ts
import { createStore, createEvent, createEffect } from "effector";
import { debug } from "patronum/debug";

const event = createEvent();
const effect = createEffect().use((payload) => Promise.resolve("result" + payload));
const $store = createStore(0)
  .on(event, (state, value) => state + value)
  .on(effect.done, (state) => state * 10);

debug($store, event, effect);

event(5);
effect("demo");

// => [store] $store 1
// => [event] event 5
// => [store] $store 6
// => [effect] effect demo
// => [effect] effect.done {"params":"demo", "result": "resultdemo"}
// => [store] $store 60
```

–û–¥–Ω–∞–∫–æ –≤–∞–º –Ω–∏–∫—Ç–æ –Ω–µ –∑–∞–ø—Ä–µ—â–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.watch` –∏–ª–∏ [`createWatch`](/ru/api/effector/createWatch) –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.

## –§–∞–±—Ä–∏–∫–∏ (#factories)

–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–±—Ä–∏–∫ —ç—Ç–æ —á–∞—Å—Ç—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å effector, –æ–Ω –æ–±–ª–µ–≥—á–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–¥–Ω–æ—Ç–∏–ø–Ω–æ–≥–æ –∫–æ–¥–∞. –û–¥–Ω–∞–∫–æ –≤—ã –º–æ–∂–µ—Ç–µ —Å—Ç–æ–ª–∫–Ω—É—Ç—å—Å—è —Å [–ø—Ä–æ–±–ª–µ–º–æ–π –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö sid](/ru/explanation/sids/#unique-sids), –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É –ø–æ–º–µ—à–∞—Ç—å –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å SSR.

–ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã, –º—ã —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É [@withease/factories](https://withease.effector.dev/factories/).

–ï—Å–ª–∏ –µ—Å–ª–∏ –≤–∞—à–∞ —Å—Ä–µ–¥–∞ –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, —Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ—é —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Ñ–∞–±—Ä–∏–∫—É —Å–ª–µ–¥—É—è [—ç—Ç–∏–º —É–∫–∞–∑–∞–Ω–∏—è–º–∏](/ru/explanation/sids/#custom-factories).

## –†–∞–±–æ—Ç–∞ —Å —Å–µ—Ç—å—é (#work-with-network)

–î–ª—è —É–¥–æ–±–Ω–æ–π —Ä–∞–±–æ—Ç—ã effector —Å –∑–∞–ø—Ä–æ—Å–∞–º–∏ –ø–æ —Å–µ—Ç–∏ –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [farfetched](https://ff.effector.dev/).

Farfetched –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:

- –ú—É—Ç–∞—Ü–∏–∏ –∏ –∫–≤–µ—Ä–∏
- –ì–æ—Ç–æ–≤–æ–µ –∞–ø–∏ –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥—Ä.
- –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤

## –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å effector (#effector-utils)

–í —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ Effector –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ [patronum](https://patronum.effector.dev/operators/), –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≥–æ—Ç–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —é–Ω–∏—Ç–∞–º–∏:

- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º (`condition`, `status` –∏ –¥—Ä.)
- –†–∞–±–æ—Ç–∞ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º (`debounce`, `interval` –∏ –¥—Ä.)
- –§—É–Ω–∫—Ü–∏–∏ –ø—Ä–µ–¥–∏–∫–∞—Ç—ã (`not`, `or`, `once` –∏ –¥—Ä.)

## –£–ø—Ä–æ—â–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏ —Å `createAction` (#create-action)

[`effector-action`](https://github.com/AlexeyDuybo/effector-action) - —ç—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–∏—Å–∞—Ç—å –∏–º–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–π –∫–æ–¥ –¥–ª—è —Å–ª–æ–∂–Ω–æ–π —É—Å–ª–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–∏, —Å–æ—Ö—Ä–∞–Ω—è—è –ø—Ä–∏ —ç—Ç–æ–º –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—É—é –ø—Ä–∏—Ä–æ–¥—É effector.
–ü—Ä–∏ —ç—Ç–æ–º `effector-action` –ø–æ–º–æ–≥–∞–µ—Ç —Å–¥–µ–ª–∞—Ç—å –≤–∞—à –∫–æ–¥ –±–æ–ª–µ–µ —á–∏—Ç–∞–±–µ–ª—å–Ω—ã–º:

<Tabs>
  <TabItem label="‚ùå –°–ª–æ–∂–Ω—ã–π sample">

```ts
import { sample } from "effector";

sample({
  clock: formSubmitted,
  source: {
    form: $form,
    settings: $settings,
    user: $user,
  },
  filter: ({ form }) => form.isValid,
  fn: ({ form, settings, user }) => ({
    data: form,
    theme: settings.theme,
  }),
  target: submitFormFx,
});

sample({
  clock: formSubmitted,
  source: $form,
  filter: (form) => !form.isValid,
  target: showErrorMessageFx,
});

sample({
  clock: submitFormFx.done,
  source: $settings,
  filter: (settings) => settings.sendNotifications,
  target: sendNotificationFx,
});
```

  </TabItem>

<TabItem label="‚úÖ –° createAction">

```ts
import { createAction } from "effector-action";

const submitForm = createAction({
  source: {
    form: $form,
    settings: $settings,
    user: $user,
  },
  target: {
    submitFormFx,
    showErrorMessageFx,
    sendNotificationFx,
  },
  fn: (target, { form, settings, user }) => {
    if (!form.isValid) {
      target.showErrorMessageFx(form.errors);
      return;
    }

    target.submitFormFx({
      data: form,
      theme: settings.theme,
    });
  },
});

createAction(submitFormFx.done, {
  source: $settings,
  target: sendNotificationFx,
  fn: (sendNotification, settings) => {
    if (settings.sendNotifications) {
      sendNotification();
    }
  },
});

submitForm();
```

  </TabItem>
</Tabs>

## –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ (#naming)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∏–Ω—è—Ç—ã–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è –æ–± –∏–º–µ–Ω–æ–≤–∞–Ω–∏–∏:

- –î–ª—è —Ö—Ä–∞–Ω–∏–ª–∏—â ‚Äì –ø—Ä–µ—Ñ–∏–∫—Å `$`
- –î–ª—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ ‚Äì –ø–æ—Å—Ç—Ñ–∏–∫—Å `fx`, —ç—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –≤–∞–º –æ—Ç–ª–∏—á–∞—Ç—å –≤–∞—à–∏ —ç—Ñ—Ñ–µ–∫—Ç—ã –æ—Ç —Å–æ–±—ã—Ç–∏–π
- –î–ª—è —Å–æ–±—ã—Ç–∏–π ‚Äì –ø—Ä–∞–≤–∏–ª –Ω–µ—Ç, –æ–¥–Ω–∞–∫–æ –º—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –≤–∞–º –Ω–∞–∑—ã–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–ø—Ä—è–º—É—é –∑–∞–ø—É—Å–∫–∞—é—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–æ—Ä–æ–≤, –∫–∞–∫ –±—É–¥—Ç–æ –æ–Ω–∏ —É–∂–µ –ø—Ä–æ–∏–∑–æ—à–ª–∏.

```ts
const updateUserNameFx = createEffect(() => {});

const userNameUpdated = createEvent();

const $userName = createStore("JS");

$userName.on(userNameUpdated, (_, newName) => newName);

userNameUpdated("TS");
```

:::info{title="–°–æ–≥–ª–∞—à–µ–Ω–∏–µ –æ–± –∏–º–µ–Ω–æ–≤–∞–Ω–∏–∏"}
–í—ã–±–æ—Ä –º–µ–∂–¥—É –ø—Ä–µ—Ñ–∏–∫—Å–æ–º –∏–ª–∏ –ø–æ—Å—Ç—Ñ–∏–∫—Å–æ–º –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —è–≤–ª—è–µ—Ç—Å—è –≤–æ–ø—Ä–æ—Å–æ–º –ª–∏—á–Ω—ã—Ö –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π. –≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –æ–ø—ã—Ç–∞ –ø–æ–∏—Å–∫–∞ –≤ –≤–∞—à–µ–π IDE.
:::

## –ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã (#anti-patterns)

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ watch –¥–ª—è –ª–æ–≥–∏–∫–∏ (#watch-for-logic)

`watch` —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.

<Tabs>
  <TabItem label="‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ">

```ts
// –õ–æ–≥–∏–∫–∞ –≤ watch
$user.watch((user) => {
  localStorage.setItem("user", JSON.stringify(user));
  api.trackUserUpdate(user);
  someEvent(user.id);
});
```

  </TabItem>
  <TabItem label="‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ">

```ts
// –û—Ç–¥–µ–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è —Å–∞–π–¥-—ç—Ñ—Ñ–µ–∫—Ç–æ–≤
const saveToStorageFx = createEffect((user: User) =>
  localStorage.setItem("user", JSON.stringify(user)),
);

const trackUpdateFx = createEffect((user: User) => api.trackUserUpdate(user));

// –°–≤—è–∑—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ sample
sample({
  clock: $user,
  target: [saveToStorageFx, trackUpdateFx],
});

// –î–ª—è —Å–æ–±—ã—Ç–∏–π —Ç–æ–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º sample
sample({
  clock: $user,
  fn: (user) => user.id,
  target: someEvent,
});
```

</TabItem>
</Tabs>

### –°–ª–æ–∂–Ω—ã–µ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ sample (#complex-samples)

–ò–∑–±–µ–≥–∞–π—Ç–µ —Å–ª–æ–∂–Ω—ã—Ö –∏ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ü–µ–ø–æ—á–µ–∫ `sample`.

### –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –≤ –∫–æ–ª–±–µ–∫–∞—Ö (#naming-in-callbacks)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ –∏–º–µ–Ω–∞ –≤–º–µ—Å—Ç–æ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã—Ö `value`, `data`, `item`.

<Tabs>
  <TabItem label="‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ">

```ts
$users.on(userAdded, (state, payload) => [...state, payload]);

sample({
  clock: buttonClicked,
  source: $data,
  fn: (data) => data,
  target: someFx,
});
```

  </TabItem>
  <TabItem label="‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ">

```ts
$users.on(userAdded, (users, newUser) => [...users, newUser]);

sample({
  clock: buttonClicked,
  source: $userData,
  fn: (userData) => userData,
  target: updateUserFx,
});
```

  </TabItem>
</Tabs>

### –ò–º–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ –≤—ã–∑–æ–≤—ã –≤ —ç—Ñ—Ñ–µ–∫—Ç–∞—Ö (#imperative-calls)

–ù–µ –≤—ã–∑—ã–≤–∞–π—Ç–µ —Å–æ–±—ã—Ç–∏—è –∏–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç—ã –∏–º–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ –≤–Ω—É—Ç—Ä–∏ –¥—Ä—É–≥–∏—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤, –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π —Å—Ç–∏–ª—å.

<Tabs>
  <TabItem label="‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ">

```ts
const loginFx = createEffect(async (params) => {
  const user = await api.login(params);

  // –ò–º–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ –≤—ã–∑–æ–≤—ã
  setUser(user);
  redirectFx("/dashboard");
  showNotification("Welcome!");

  return user;
});
```

  </TabItem>
  <TabItem label="‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ">

```ts
const loginFx = createEffect((params) => api.login(params));
// –°–≤—è–∑—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ sample
sample({
  clock: loginFx.doneData,
  target: [
    $user, // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–æ—Ä
    redirectToDashboardFx,
    showWelcomeNotificationFx,
  ],
});
```

 </TabItem>
</Tabs>

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ getState (#get-state)

–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `$store.getState` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π. –ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–∞–∫–æ–≥–æ-—Ç–æ —Å—Ç–æ—Ä–∞, —Ç–æ –ø–µ—Ä–µ–¥–∞–π—Ç–µ –µ–≥–æ —Ç—É–¥–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä –≤ `source` —É `sample`:

<Tabs>
  <TabItem label="‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ">

```ts
const submitFormFx = createEffect((formData) => {
  // –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ getState
  const user = $user.getState();
  const settings = $settings.getState();

  return api.submit({
    ...formData,
    userId: user.id,
    theme: settings.theme,
  });
});
```

</TabItem>
  <TabItem label="‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ">

```ts
// –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
const submitFormFx = createEffect(({ form, userId, theme }) => {});

// –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ sample
sample({
  clock: formSubmitted,
  source: {
    form: $form,
    user: $user,
    settings: $settings,
  },
  fn: ({ form, user, settings }) => ({
    form,
    userId: user.id,
    theme: settings.theme,
  }),
  target: submitFormFx,
});
```

  </TabItem>
</Tabs>

### –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤ UI (#business-logic-in-ui)

–ù–µ —Ç–∞—â–∏—Ç–µ –≤–∞—à—É –ª–æ–≥–∏–∫—É –≤ UI —ç–ª–µ–º–µ–Ω—Ç—ã, —ç—Ç–æ [–æ—Å–Ω–æ–≤–Ω–∞—è —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è](/ru/introduction/motivation) effector –∏ —Ç–æ, –æ—Ç —á–µ–≥–æ effector –ø—ã—Ç–∞–µ—Ç—Å—è –∏–∑–±–∞–≤–∏—Ç—å –≤–∞—Å, –∞ –∏–º–µ–Ω–Ω–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –ª–æ–≥–∏–∫–∏ –æ—Ç UI.

–ö—Ä–∞—Ç–∫–æ –æ–± –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–∞—Ö:

1. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `watch` –¥–ª—è –ª–æ–≥–∏–∫–∏, —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
2. –ò–∑–±–µ–≥–∞–π—Ç–µ –ø—Ä—è–º—ã—Ö –º—É—Ç–∞—Ü–∏–π –≤ —Å—Ç–æ—Ä–∞—Ö
3. –ù–µ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ —Å–ª–æ–∂–Ω—ã–µ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ `sample`, –∏—Ö —Å–ª–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å
4. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª—å—à–∏–µ —Å—Ç–æ—Ä—ã, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞—Ç–æ–º–∞—Ä–Ω—ã–π –ø–æ–¥—Ö–æ–¥
5. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –∞ –Ω–µ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ
6. –ù–µ –≤—ã–∑—ã–≤–∞–π—Ç–µ —Å–æ–±—ã—Ç–∏—è –≤–Ω—É—Ç—Ä–∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –∏–º–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ
7. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `$store.getState` –¥–ª—è —Ä–∞–±–æ—Ç—ã
8. –ù–µ —Ç–∞—â–∏—Ç–µ –ª–æ–≥–∏–∫—É –≤ UI
