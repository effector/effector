---
title: Инициализация юнитов
description: Рассказываем почему необходимо описывать юниты на уровне модуля статически, а не создавать их в рантайме.
lang: ru
---

# Инициализация юнитов (#unit-init)

При работе с effector важно соблюдать ключевое правило - создавать юниты не в рантайме, а статически на уровне модуля, чтобы избежать утечки памяти в вашем приложении.

Чтобы понять, почему это происходит, нужно заглянуть в ядро effector и разобраться, как он устроен. В основе лежит модель [графа](https://ru.wikipedia.org/wiki/%D0%A2%D0%B5%D0%BE%D1%80%D0%B8%D1%8F_%D0%B3%D1%80%D0%B0%D1%84%D0%BE%D0%B2). Каждый юнит — это узел в графе, каждый узел хранит в себе информацию о состоянии, операциях и связях с другими юнитами. Например в таком коде:

```ts
import { combine, createStore } from "effector";

const $store = createStore(0);
const $derivedStore = combine($store, (storeVal) => !!storeVal);
```

При создании `$store` мы добавляем новый узел в граф effector'а, который хранит ссылку на стор. Для производного стора тоже создается узел, а также связь с исходным стором. Так как ссылки на объекты юнитов сохраняются в графе, то [GC](https://javascript.info/garbage-collection) в Javascript не способен удалить их из памяти. Поэтому, например, если вы создадите юниты или связи между ними внутри React компонента, то у вас при каждом маунте компонента они будут пересоздаваться, а старые юниты все также будут жить и работать.

## А что с динамикой? (#whats-with-dynamic)

Конечно команда effector понимает насколько важно динамическое поведение, поэтому сейчас активно ведется разработка [динамических моделей](/ru/essentials/dynamic-models), которые следует ожидать в следующем мажорном обновлении!
