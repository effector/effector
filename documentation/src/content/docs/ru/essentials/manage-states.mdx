---
title: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –≤ effector
description: –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ effector –∏ –∫–∞–∫ –∏–º —É–ø—Ä–∞–≤–ª—è—Ç—å
lang: ru
---

import Tabs from "@components/Tabs/Tabs.astro";
import TabItem from "@components/Tabs/TabItem.astro";

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º (#state-management)

–°–æ—Å—Ç–æ—è–Ω–∏–µ –≤ effector —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å—Ç–æ—Ä—ã ([Store](/ru/api/effector/Store)) - —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ö—Ä–∞–Ω—è—Ç –∑–Ω–∞—á–µ–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª—è—é—Ç –∏—Ö –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏–π. –°—Ç–æ—Ä—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ [createStore](/ru/api/effector/createStore).

:::info{title="–ò–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö"}
–î–∞–Ω–Ω—ã–µ —Å—Ç–æ—Ä–æ–≤ –≤ effector –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω—ã–µ ‚Äì —ç—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –≤—ã –Ω–µ –¥–æ–ª–∂–Ω—ã –º—É—Ç–∏—Ä–æ–≤–∞—Ç—å –º–∞—Å—Å–∏–≤—ã –∏–ª–∏ –æ–±—ä–µ–∫—Ç—ã –Ω–∞–ø—Ä—è–º—É—é, –∞ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ –∏–Ω—Å—Ç–∞–Ω—Å—ã –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö.
:::

<Tabs>
  <TabItem label="‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ">

```ts
// –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ –¥–∞–Ω–Ω—ã—Ö
$users.on(userAdded, (users, newUser) => [...users, newUser]);

//–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞
$user.on(nameChanged, (user, newName) => ({
  ...user,
  name: newName,
}));
```

  </TabItem>

  <TabItem label="‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ">

```ts
// –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ –¥–∞–Ω–Ω—ã—Ö
$users.on(userAdded, (users, newUser) => {
  users.push(newUser); // –ú—É—Ç–∞—Ü–∏—è!
  return users;
});

//–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞
$user.on(nameChanged, (user, newName) => {
  user.name = newName; // –ú—É—Ç–∞—Ü–∏—è!
  return user;
});
```

  </TabItem>
</Tabs>

## –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–æ—Ä–∞ (#store-creation)

–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å—Ç–æ—Ä –º–æ–∂–Ω–æ –ø—Ä–∏ –ø–æ–º–æ—â–∏ –º–µ—Ç–æ–¥–∞ [`createStore`](/ru/api/effector/createStore):

```ts
import { createStore } from "effector";

// –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–æ—Ä–∞ —Å –Ω–∞—á–∞–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º
const $counter = createStore(0);
// —Å —è–≤–Ω–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π
const $user = createStore<{ name: "Bob"; age: 25 } | null>(null);
const $posts = createStore<Post[]>([]);
```

:::tip{title="–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Å—Ç–æ—Ä–æ–≤"}
–í effector –ø—Ä–∏–Ω—è—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ—Ñ–∏–∫—Å `$` –¥–ª—è —Å—Ç–æ—Ä–æ–≤. –≠—Ç–æ —É–ª—É—á—à–∞–µ—Ç –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é –≤ –∫–æ–¥–µ –∏ –æ–ø—ã—Ç –ø–æ–∏—Å–∫–∞ –≤ –≤–∞—à–µ–π IDE.
:::

## –ß—Ç–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π (#read-store-value)

–ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—Ç–æ—Ä–∞ –º–æ–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏:

1. –ü—Ä–∏ –ø–æ–º–æ—â–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤ –∏ —Ö—É–∫–∞ `useUnit` ([üìò&nbsp;React](/ru/api/effector-react/useUnit), [üìó&nbsp;Vue](/ru/api/effector-vue/useUnit), [üìò&nbsp;Solid](/ru/api/effector-solid/useUnit)):

<Tabs>
  <TabItem label="React">

```ts
import { useUnit } from 'effector-react'
import { $counter } from './model.js'

const Counter = () => {
  const counter = useUnit($counter)

  return <div>{counter}</div>
}
```

  </TabItem>
  <TabItem label="Vue">

```html
<script setup>
  import { useUnit } from "effector-vue/composition";
  import { $counter } from "./model.js";
  const counter = useUnit($counter);
</script>
```

  </TabItem>
  <TabItem label="Solid">

```ts
import { useUnit } from 'effector-solid'
import { $counter } from './model.js'

const Counter = () => {
  const counter = useUnit($counter)

  return <div>{counter()}</div>
}
```

  </TabItem>
</Tabs>

2. –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ `watch` - —Ç–æ–ª—å–∫–æ –¥–ª—è –¥–µ–±–∞–≥–∞ –∏–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

```ts
$counter.watch((counter) => {
  console.log("Counter changed:", counter);
});
```

3. –ú–µ—Ç–æ–¥ `getState()` - —Ç–æ–ª—å–∫–æ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

```ts
console.log($counter.getState()); // 0
```

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (#store-updates)

–í effector –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ [—Å–æ–±—ã—Ç–∏—è](/ru/essentials/events). –í—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∞–≤—à–∏—Å—å –Ω–∞ —Å–æ–±—ã—Ç–∏–µ —á–µ—Ä–µ–∑ `.on` –∏–ª–∏ –ø—Ä–∏ –ø–æ–º–æ—â–∏ –º–µ—Ç–æ–¥–∞ [`sample`](/ru/essentials/unit-composition).

:::info{title="–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π"}
–°–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ç–æ—Ä–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–æ–≥–¥–∞ –ø–æ–ª—É—á–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ —Ä–∞–≤–Ω–æ (!==) —Ç–µ–∫—É—â–µ–º—É, –∞ —Ç–∞–∫–∂–µ –Ω–µ —Ä–∞–≤–Ω–æ `undefined`.
:::

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è (#update-store-via-events)

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –∏ –≤–µ—Ä–Ω—ã–π —Å–ø–æ—Å–æ–± –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–æ—Ä - —ç—Ç–æ –ø—Ä–∏–≤—è–∑–∞—Ç—å –µ–≥–æ –∫ —Å–æ–±—ã—Ç–∏—é:

```ts
import { createStore, createEvent } from "effector";

const incremented = createEvent();
const decremented = createEvent();
const resetCounter = createEvent();

const $counter = createStore(0)
  // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ 1 –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ —Å–æ–±—ã—Ç–∏—è
  .on(incremented, (counterValue) => counterValue + 1)
  // –£–º–µ–Ω—å—à–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ 1 –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ —Å–æ–±—ã—Ç–∏—è
  .on(decremented, (counterValue) => counterValue - 1)
  // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –≤ 0
  .reset(resetCounter);

$counter.watch((counterValue) => console.log(counterValue));

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
incremented();
incremented();
decremented();

resetCounter();

// –í—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å
// 0 - –≤—ã–≤–æ–¥ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
// 1
// 2
// 1
// 0 - —Å–±—Ä–æ—Å–∏–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
```

:::info{title="–ß—Ç–æ —Ç–∞–∫–æ–µ —Å–æ–±—ã—Ç–∏—è?"}
–ï—Å–ª–∏ –≤—ã –Ω–µ –∑–Ω–∞–∫–æ–º—ã —Å `createEvent` –∏ —Å–æ–±—ã—Ç–∏—è–º–∏, —Ç–æ –≤—ã —É–∑–Ω–∞–µ—Ç–µ –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–∏–º–∏ –Ω–∞ [—Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ](/ru/essentials/events).
:::

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (#update-stores-with-params)

–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–æ—Ä –º–æ–∂–Ω–æ –∏ —Å –ø–æ–º–æ—â—å—é –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–æ–±—ã—Ç–∏—è, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏—à—å –ø–µ—Ä–µ–¥–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Å–æ–±—ã—Ç–∏–µ, –∫–∞–∫ —É –æ–±—ã—á–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏, –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ:

```ts mark={12}
import { createStore, createEvent } from "effector";

const userUpdated = createEvent<{ name: string }>();

const $user = createStore({ name: "Bob" });

$user.on(userUpdated, (user, changedUser) => ({
  ...user,
  ...changedUser,
}));

userUpdated({ name: "Alice" });
```

### –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (#update-stores-with-sample)

–ü—Ä–∏ –ø–æ–º–æ—â–∏ –º–µ—Ç–æ–¥–∞ `on` –º—ã –º–æ–∂–µ–º –æ–±–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ç–æ—Ä–∞ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Å–ª—É—á–∞–µ–≤, –ø—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ –∫–∞–∫–æ–≥–æ-—Ç–æ —Å–æ–±—ã—Ç–∏—è, –ø–µ—Ä–µ–¥–∞–≤ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–æ–±—ã—Ç–∏—è –ª–∏–±–æ –æ–±–Ω–æ–≤–∏—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è.

–û–¥–Ω–∞–∫–æ —ç—Ç–æ –Ω–µ –≤—Å–µ–≥–¥–∞ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ –Ω—É–∂–¥—ã. –î–ª—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –º—ã –º–æ–∂–µ–º –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –º–µ—Ç–æ–¥–æ–º [`sample`](/ru/api/effector/sample), –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç –Ω–∞–º –≤ —Å–ª—É—á–∞–µ –∫–æ–≥–¥–∞:

- –ù—É–∂–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–æ—Ä–∞ –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Å–æ–±—ã—Ç–∏—è
- –¢—Ä–µ–±—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–æ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–Ω–∞—á–µ–Ω–∏–π –¥—Ä—É–≥–∏—Ö —Å—Ç–æ—Ä–æ–≤
- –ù—É–∂–Ω–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å—Ç–æ—Ä–∞ —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ –∞–∫—Ç—É–∞–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º –¥—Ä—É–≥–∏—Ö —Å—Ç–æ—Ä–æ–≤

–ù–∞–ø—Ä–∏–º–µ—Ä:

```ts
import { createEvent, createStore, sample } from "effector";

const updateItems = createEvent();

const $items = createStore([1, 2, 3]);
const $filteredItems = createStore([]);
const $filter = createStore("even");

// sample –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –∞–∫—Ç—É–∞–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º
// –≤—Å–µ—Ö —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å—Ç–æ—Ä–æ–≤ –≤ –º–æ–º–µ–Ω—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è
sample({
  clock: updateItems,
  source: { items: $items, filter: $filter },
  fn: ({ items, filter }) => {
    if (filter === "even") {
      return items.filter((n) => n % 2 === 0);
    }

    return items.filter((n) => n % 2 === 1);
  },
  target: $filteredItems,
});
```

:::info{title="–ß—Ç–æ —Ç–∞–∫–æ–µ sample?"}
–û —Ç–æ–º, —á—Ç–æ —Ç–∞–∫–æ–µ `sample`, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –∏ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –µ–≥–æ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è [–∑–¥–µ—Å—å](/ru/essentials/unit-composition#sample).
:::

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ `sample` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è:

1. –î–æ—Å—Ç—É–ø –∫ –∞–∫—Ç—É–∞–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º –≤—Å–µ—Ö —Å—Ç–æ—Ä–æ–≤
2. –ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ç–æ—Ä–æ–≤
3. –ö–æ–Ω—Ç—Ä–æ–ª—å –º–æ–º–µ–Ω—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ `clock`
4. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ `filter`
5. –£–¥–æ–±–Ω–∞—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é `fn`

### –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–æ—Ä–∞ –ø—Ä–∏ –ø–æ–º–æ—â–∏ –º–µ—Ç–æ–¥–∞ `restore` (#create-store-via-restore)

–ï—Å–ª–∏ —É –≤–∞—Å —Ä–∞–±–æ—Ç–∞ —Å–æ —Å—Ç–æ—Ä–æ–º –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç –∑–∞–º–µ–Ω—É —Å—Ç–∞—Ä–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ –Ω–æ–≤–æ–µ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ —Å–æ–±—ã—Ç–∏—è, —Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ [`restore`](/ru/api/effector/restore):

```ts mark={5}
import { restore, createEvent } from "effector";

const nameChanged = createEvent<string>();

const $counter = restore(nameChanged, "");
```

–ö–æ–¥ –≤—ã—à–µ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–µ–Ω –∫–æ–¥—É –Ω–∏–∂–µ:

```ts mark={5}
import { createStore, createEvent } from "effector";

const nameChanged = createEvent<string>();

const $counter = createStore("").on(nameChanged, (_, newName) => newName);
```

–¢–∞–∫–∂–µ –º–µ—Ç–æ–¥ `restore` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º, –≤ —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –≤ —Å—Ç–æ—Ä –ø–æ–ø–∞–¥—É—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–æ–±—ã—Ç–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∞ [`doneData`](/ru/api/effector/Effect#doneData), –∞ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—Ç–æ—Ä–∞ –¥–æ–ª–∂–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é:

:::info{title="–ß—Ç–æ —Ç–∞–∫–æ–µ —ç—Ñ—Ñ–µ–∫—Ç—ã?"}
–ï—Å–ª–∏ –≤—ã –Ω–µ –∑–Ω–∞–∫–æ–º—ã —Å `createEffect` –∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏, —Ç–æ –≤—ã —É–∑–Ω–∞–µ—Ç–µ –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–∏–º–∏ –Ω–∞ [—ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ](/ru/essentials/work-with-async).
:::

```ts
import { restore, createEffect } from "effector";

// —É–ø—É—Å—Ç–∏–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Ç–∏–ø–æ–≤
const createUserFx = createEffect<string, User>((id) => {
  return {
    id: 4,
    name: "Bob",
    age: 18,
  };
});

const $newUser = restore(createUserFx, {
  id: 0,
  name: "",
  age: -1,
});

createUserFx();

// –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —ç—Ñ—Ñ–µ–∫—Ç–∞
// $newUser –±—É–¥–µ—Ç:
//   {
// 		id: 4,
// 		name: "Bob",
// 		age: 18,
//   }
```

### –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (#multiple-store-updates)

–°—Ç–æ—Ä –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –æ–¥–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–æ–π –Ω–∞ —Å–æ–±—ã—Ç–∏–µ, –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Å—Ç–æ–ª—å–∫–æ —Å–æ–±—ã—Ç–∏–π, —Å–∫–æ–ª—å–∫–æ –≤–∞–º –Ω—É–∂–Ω–æ, –∞ —Ç–∞–∫–∂–µ –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –Ω–∞ –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ —Å–æ–±—ã—Ç–∏–µ —Ä–∞–∑–Ω—ã–º–∏ —Å—Ç–æ—Ä–∞–º–∏:

```ts "categoryChanged"
import { createEvent, createStore } from "effector";

const categoryChanged = createEvent<string>();
const searchQueryChanged = createEvent<string>();
const filtersReset = createEvent();

const $lastUsedFilter = createStore<string | null>(null);
const $filters = createStore({
  category: "all",
  searchQuery: "",
});

// –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—Å—è –¥–≤—É–º—è —Ä–∞–∑–Ω—ã–º–∏ —Å—Ç–æ—Ä–∞–º–∏ –Ω–∞ –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ —Å–æ–±—ã—Ç–∏–µ
$lastUsedFilter.on(categoryChanged, (_, categoty) => category);
$filters.on(categoryChanged, (filters, category) => ({
  ...filters,
  category,
}));

$filters.on(searchQueryChanged, (filters, searchQuery) => ({
  ...filters,
  searchQuery,
}));

$filters.reset(filtersReset);
```

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—Å—è —Å—Ç–æ—Ä–æ–º `$filters` –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–±—ã—Ç–∏–π, –∞ —Ç–∞–∫–∂–µ –¥–≤—É–º—è —Å—Ç–æ—Ä–∞–º–∏ `$filters` –∏ `$lastUsedFilter` –Ω–∞ –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ —Å–æ–±—ã—Ç–∏–µ `categoryChanged`.

### –£–ø—Ä–æ—â–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å `createApi` (#simplified-updates-with-createapi)

–ö–æ–≥–¥–∞ –≤–∞–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –¥–ª—è –æ–¥–Ω–æ–≥–æ —Å—Ç–æ—Ä–∞, –≤–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π –∏ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –Ω–∏—Ö, –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [`createApi`](/ru/api/effector/createApi). –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–µ—Ç –Ω–∞–±–æ—Ä —Å–æ–±—ã—Ç–∏–π –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–æ—Ä–∞ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ.<br/>
–°–ª–µ–¥—É—é—â–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç—ã:

<Tabs>
  <TabItem label="–° createApi">

```ts
import { createStore, createApi } from "effector";

const $counter = createStore(0);

const { increment, decrement, reset } = createApi($counter, {
  increment: (state) => state + 1,
  decrement: (state) => state - 1,
  reset: () => 0,
});

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
increment(); // 1
reset(); // 0
```

  </TabItem>
  <TabItem label="–û–±—ã—á–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ">

```ts
import { createStore, createEvent } from "effector";

const $counter = createStore(0);

const incrementClicked = createEvent();
const decrementClicked = createEvent();
const resetClicked = createEvent();

$counter
  .on(incrementClicked, (state) => state + 1)
  .on(decrementClicked, (state) => state - 1)
  .reset(resetClicked);

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
increment(); // 1
reset(); // 0
```

  </TabItem>
</Tabs>

## –ü—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ —Å—Ç–æ—Ä—ã (#derived-stores)

–ß–∞—Å—Ç–æ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å—Ç–æ—Ä, –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥—Ä—É–≥–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π. –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ç–æ–¥ [`map`](/ru/api/effector/Store#map):

```ts
import { createStore, combine } from "effector";

const $currentUser = createStore({
  id: 1,
  name: "Winnie Pooh",
});
const $users = createStore<User[]>([]);

// –û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫
const $activeUsers = $users.map((users) => users.filter((user) => user.active));

// –í—ã—á–∏—Å–ª—è–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
const $totalUsersCount = $users.map((users) => users.length);
const $activeUsersCount = $activeUsers.map((users) => users.length);

// –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ç–æ—Ä–æ–≤
const $friendsList = combine($users, $currentUser, (users, currentUser) =>
  users.filter((user) => user.friendIds.includes(currentUser.id)),
);
```

–ú—ã —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –∑–¥–µ—Å—å –º–µ—Ç–æ–¥ [`combine`](/ru/api/effector/combine), –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ç–æ—Ä–æ–≤ –≤ –æ–¥–Ω–æ.<br/>
–¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–æ—Ä—ã –≤ –æ–±—ä–µ–∫—Ç:

```ts
import { combine } from "effector";

const $form = combine({
  name: $name,
  age: $age,
  city: $city,
});

// –∏–ª–∏ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
const $formValidation = combine($name, $age, (name, age) => ({
  isValid: name.length > 0 && age >= 18,
  errors: {
    name: name.length === 0 ? "Required" : null,
    age: age < 18 ? "Must be 18+" : null,
  },
}));
```

:::warning{title="–í–∞–∂–Ω–æ –ø—Ä–æ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è"}
–ü—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ —Å—Ç–æ—Ä—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∏—Å—Ö–æ–¥–Ω—ã—Ö —Å—Ç–æ—Ä–æ–≤. **–ù–µ –Ω—É–∂–Ω–æ** –≤—Ä—É—á–Ω—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è.
:::

## –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è (#resetting-store-state)

–í—ã –º–æ–∂–µ—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ç–æ—Ä–∞ –¥–æ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –ø—Ä–∏ –ø–æ–º–æ—â–∏ –º–µ—Ç–æ–¥–∞ `reset`:

```ts
const formSubmitted = createEvent();
const formReset = createEvent();

const $form = createStore({ email: "", password: "" })
  // –æ—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É –ø—Ä–∏ —Å–∞–±–º–∏—Ç–µ –∏ —è–≤–Ω–æ–º —Å–±—Ä–æ—Å–µ
  .reset(formReset, formSubmitted);
  // –∏–ª–∏
  .reset([formReset, formSubmitted]);
```

## –ó–Ω–∞—á–µ–Ω–∏—è `undefined` (#void-values)

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é effector –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º `undefined`. –≠—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –Ω–∏—á–µ–≥–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∏–∑ —Ä–µ–¥—å—é—Å–µ—Ä–æ–≤, –µ—Å–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–æ—Ä–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è:

```ts
const $store = createStore(0).on(event, (_, newValue) => {
  if (newValue % 2 === 0) {
    return;
  }

  return newValue;
});
```

:::warning{title="–í–Ω–∏–º–∞–Ω–∏–µ!"}
–≠—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –±—É–¥–µ—Ç –æ—Ç–∫–ª—é—á–µ–Ω–æ –≤ –±—É–¥—É—â–µ–º!
–ö–∞–∫ –ø–æ–∫–∞–∑–∞–ª–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞, –±—É–¥–µ—Ç –ª—É—á—à–µ –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—Ç–æ—Ä–∞.
:::

–ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `undefined` –∫–∞–∫ –≤–∞–ª–∏–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å —Å –ø–æ–º–æ—â—å—é `skipVoid: false` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å—Ç–æ—Ä–∞:

```ts
import { createStore, createEvent } from "effector";

const setVoidValue = createEvent<number>();

// ‚ùå undefined –±—É–¥—É—Ç –ø—Ä–æ–ø—É—â–µ–Ω—ã
const $store = createStore(13).on(setVoidValue, (_, voidValue) => voidValue);

// ‚úÖ undefined —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –∫–∞–∫ –∑–Ω–∞—á–µ–Ω–∏—è
const $store = createStore(13, {
  skipVoid: false,
}).on(setVoidValue, (_, voidValue) => voidValue);

setVoidValue(null);
```

:::tip{title="null –≤–º–µ—Å—Ç–æ undefined"}
–í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `null` –≤–º–µ—Å—Ç–æ `undefined` –¥–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π.
:::

[–ü–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –ø–æ–ª–Ω—ã–º API –¥–ª—è —Å—Ç–æ—Ä–æ–≤ —Ç—É—Ç](/ru/api/effector/Store)
