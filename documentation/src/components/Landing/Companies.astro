---
import { getPathParamsFromId, getTextLocalized, translations } from "../../languages";

const companies = [
  {
    url: "aviasales.png",
    alt: "Aviasales",
    yOffset: true,
  },
  {
    url: "healthSamurai.svg",
    alt: "Health Samurai",
  },
  {
    url: "raiffeisen.svg",
    alt: "Raiffeisen Bank Russia",
  },
  {
    url: "unicef.svg",
    alt: "UNICEF (United Nations Children’s Fund)",
  },
  {
    url: "joom.svg",
    alt: "Joom Group",
  },
  {
    url: "sber.png",
    alt: "Sber",
  },
  {
    url: "avito.svg",
    alt: "Avito",
    scale: 1.4,
  },
  {
    url: "mts.svg",
    alt: "MTS",
  },
  {
    url: "docsvision.png",
    alt: "Docsvision",
    scale: 1.2,
  },
  {
    url: "okoo.png",
    alt: "Okoo",
    yOffset: true,
  },
  {
    url: "space307.svg",
    alt: "space307",
  },
  {
    url: "redmadrobot.png",
    alt: "REDMADROBOT",
    yOffset: true,
  },
  {
    url: "travelpayouts.svg",
    alt: "Travelpayouts",
  },
  {
    url: "junto.png",
    alt: "Junto",
  },
  {
    url: "automationhero.svg",
    alt: "automation hero",
  },
  {
    url: "radity.png",
    alt: "Radity",
  },
  {
    url: "globalCtoForum.png",
    alt: "Global CTO Forum",
  },
  {
    url: "express24.svg",
    alt: "Express24",
    scale: 1.4,
  },
  {
    url: "stellarX.svg",
    alt: "StellarX",
  },
  {
    url: "stmLabs.png",
    alt: "STM Labs",
  },
  {
    url: "tenpixls.png",
    alt: "TenPixls",
  },
  {
    url: "uptarget.png",
    alt: "Uptarget",
  },
  {
    url: "smartomato.svg",
    alt: "смартомато",
  },
  {
    url: "foxford.svg",
    alt: "Фоксфорд",
  },
  {
    url: "codengage.png",
    alt: "Codengage",
  },
  {
    url: "lunatask.png",
    alt: "Lunatask",
  },
  {
    url: "semrush.png",
    alt: "Semrush",
  },
  {
    url: "intouchHealth.png",
    alt: "Intouch Health, a Teladoc company",
  },
];

const { lang } = getPathParamsFromId(Astro.url.pathname);
---

<section class="companies">
  <h3>
    {getTextLocalized(translations.Landing.Companies.title, lang)}
  </h3>
  <ul class="companies-list">
    {
      companies.map(({ url, alt, yOffset, scale }) => {
        return (
          <li
            class="companies-item"
            data-logo-offset={yOffset}
            style={{ "--logo-scale": scale ?? null }}
          >
            <img alt={alt} src={`/logo/${url}`} title={alt} />
          </li>
        );
      })
    }
  </ul>
  <div class="companies-add-yours">
    <span>
      {getTextLocalized(translations.Landing.Companies.wantToAppear, lang)}
    </span>
    <a href="https://github.com/effector/effector/issues/278">
      {getTextLocalized(translations.Landing.Companies.tellUs, lang)}
    </a>
  </div>
</section>

<style>
  :root {
    --logos-bg: hsla(var(--color-stone-10), 1);
    --logos-text: hsla(var(--color-gray-10), 1);
    --logos-text-light: hsla(var(--color-gray-30), 1);
  }

  .companies {
    @apply px-3 pb-12 pt-6;
    background-color: var(--theme-landing-logos-bg);
    --container-max-width: 95vw;
    --logo-card-size: 80px;
  }

  @media (min-width: 480px) {
    .companies {
      @apply px-4 pb-16 pt-8;
      --container-max-width: 90vw;
      --logo-card-size: 100px;
    }
  }

  @media (min-width: 640px) {
    .companies {
      @apply px-5;
      --logo-card-size: 120px;
    }
  }

  @media (min-width: 768px) {
    .companies {
      @apply pb-20;
      --container-max-width: 90vw;
      --logo-card-size: 130px;
    }
  }

  @media (min-width: 966px) {
    .companies {
      --container-max-width: 80vw;
      --logo-card-size: 150px;
    }
  }

  .companies h3 {
    @apply mb-6 text-2xl;
    -webkit-box-decoration-break: clone;
    -webkit-text-fill-color: transparent;
    background: linear-gradient(to right bottom, var(--logos-text-light) 30%, var(--logos-text));
    -webkit-background-clip: text;
    line-height: 1.3;
    text-align: center;
  }

  @media (min-width: 480px) {
    .companies h3 {
      @apply mb-8 text-3xl;
    }
  }

  @media (min-width: 768px) {
    .companies h3 {
      @apply mb-10 text-4xl;
    }
  }

  @media (min-width: 1024px) {
    .companies h3 {
      @apply mb-6;
    }
  }

  .companies-list {
    @apply mx-auto grid items-center justify-center gap-2;
    max-width: var(--container-max-width);
    grid-template-columns: repeat(auto-fill, minmax(var(--logo-card-size), 1fr));
    justify-items: center;
  }

  @media (min-width: 480px) {
    .companies-list {
      @apply gap-3;
    }
  }

  @media (min-width: 768px) {
    .companies-list {
      @apply gap-4;
    }
  }

  .companies-item > img,
  .companies-item > svg {
    object-fit: contain;
    width: 100%;
    max-width: var(--logo-card-size);
    aspect-ratio: 3/2;
    transform: scale(var(--logo-scale, 1));
  }

  .companies-item > svg {
    width: fit-content;
  }

  .companies-item[data-logo-offset] > img {
    transform: translateY(-5%);
  }

  .companies-add-yours {
    @apply mx-auto flex max-w-6xl flex-col items-center gap-1 p-2 text-xs italic;
  }

  @media (min-width: 480px) {
    .companies-add-yours {
      @apply flex-row justify-end p-3;
    }
  }

  .companies-add-yours > span {
    color: var(--logos-text);
  }
</style>
