---
id: babel-plugin
title: Babel plugin
hide_title: true
---

# effector/babel-plugin

Built-in plugin for babel, which can be used for ssr and debugging. It inserts a name of a unit, inferred from variable name and `sid` (stable identifier), computed from location in the source code.

For example, in case of [effects without handlers](./Effect.md#usehandler), it will improve error message by clearly showing in which effect error happened.

```js
import {createEffect} from 'effector'

const fetchFx = createEffect()

fetchFx()

// => no handler used in fetchFx
```

[Try it](https://share.effector.dev/Yb8vQ1Ly)

## Usage

In the simplest case, it can be used without any configuration:

```json
{
  "plugins": ["effector/babel-plugin"]
}
```
### .sid

:::note since
effector 20.2.0
:::

Stable hash identifier for events, effects, stores and domains, preserved between environments, to handle client-server interaction within the same codebase.

The key is that sid can be autogenerated by effector/babel-plugin with default config and it will be stable between builds

See [example project](https://github.com/zerobias/effector/tree/master/examples/worker-rpc)

```js title="common.js"
import {createEffect} from 'effector'

export const getUser = createEffect({sid: 'GET /user'})
console.log(getUsers.sid)
// => GET /user
```
```js title="worker.js"
import {getUsers} from './common.js'

getUsers.use(userID => fetch(userID))

getUsers.done.watch(({result}) => {
  postMessage({sid: getUsers.sid, result})
})

onmessage = async ({data}) => {
  if (data.sid !== getUsers.sid) return
  getUsers(data.userID)
}
```

```js title="client.js"
import {createEvent} from 'effector'
import {getUsers} from './common.js'

const onMessage = createEvent()

const worker = new Worker('worker.js')
worker.onmessage = onMessage

getUsers.use(
  userID =>
    new Promise(rs => {
      worker.postMessage({sid: getUsers.sid, userID})
      const unwatch = onMessage.watch(({data}) => {
        if (data.sid !== getUsers.sid) return
        unwatch()
        rs(data.result)
      })
    }),
)
```
### noDefaults 

:::note since
effector 20.2.0
:::

Option for effector/babel-plugin for making custom unit fabrics with clean configuration

```json
{
  "plugins": [
    ["effector/babel-plugin", {"addLoc": true}],
    [
      "effector/babel-plugin",
      {
        "importName": "@lib/createInputField",
        "storeCreators": ["createInputField"],
        "noDefaults": true
      },
      "createInputField"
    ]
  ]
}
```

```js title="@lib/createInputField.js"

import {createStore} from 'effector'
import {resetForm} from './form'

export function createInputField(defaultState, {sid, name}) {
  return createStore(defaultState, {sid, name}).reset(resetForm)
}
```

```js title="src/state.js"
import {createInputField} from '@lib/createInputField'

const foo = createInputField('-')
/* 

will be treated as store creator and compiled to

const foo = createInputField('-', {
  name: 'foo',
  sid: 'z&si65'
})

*/

```